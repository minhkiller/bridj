

# Introduction #

BridJ was designed with JNAerator in mind, so that you never have to translate any C / C++ / ObjectiveC header by hand.

JNAerator creates Java sources or classes, that can then be used seamlessly from Scala.

However, BridJ has some Scala-specific features in its core classes, and JNAerator has Scala-specific generation modes.

This page details these Scala-oriented features.

# Pointer #

[BridJ's pointer class](http://nativelibs4java.sourceforge.net/bridj/api/stable/org/bridj/Pointer.html) was designed to behave like a list, so provided you import `scala.collection.JavaConversions._` you'll be able to iterate over its pointed elements.

It also implements apply and update, so indexed access can be made with the natural Scala syntax :
```
val value = pointer(index)
pointer(index) = value
```

<table><tr valign='top'><td>
C code that demonstrates multi-dimensional arrays declarations and usage :<br>
<pre><code>float array1d[100];<br>
float array2d[100][200];<br>
float array3d[100][200][300];<br>
<br>
float v1 = array1d[10];<br>
float v2 = array2d[10][20];<br>
float v3 = array3d[10][20][30];<br>
array3d[10][20][30] = v1 + v2 + v3;<br>
</code></pre>
</td></tr><tr valign='top'><td>
Scala code :<br>
<pre><code>import org.bridj.Pointer._<br>
<br>
val array1d = allocateFloats(100)<br>
val array2d = allocateFloats(100, 200)<br>
val array3d = allocateFloats(100, 200, 300)<br>
<br>
val v1 = array1d(10)<br>
val v2 = array2d(10)(20)<br>
val v3 = array3d(10)(20)(30)<br>
array3d(10)(20)(30) = v1 + v2 + v3<br>
</code></pre>
</td><td>
Java code :<br>
<pre><code>import org.bridj.Pointer;<br>
import static org.bridj.Pointer.*;<br>
...<br>
Pointer&lt;Float&gt; <br>
	array1d = allocateFloats(100);<br>
    <br>
Pointer&lt;Pointer&lt;Float&gt;&gt; <br>
	array2d = allocateFloats(100, 200);<br>
<br>
Pointer&lt;Pointer&lt;Pointer&lt;Float&gt;&gt;&gt; <br>
	array3d = allocateFloats(100, 200, 300);<br>
<br>
float v1 = array1d.get(10);<br>
float v2 = array2d.get(10).get(20);<br>
float v3 = array3d.get(10).get(20).get(30);<br>
array3d.get(10).get(20).set(30, v1 + v2 + v3);<br>
</code></pre>
</td></tr></table>

# Structs #

When using [JNAerator](http://code.google.com/p/jnaerator/) to create BridJ structs, you can use the `-scalaSetters` switch to generate setters in the form `MyStruct.myField_=` that are treated like setters by Scala.

These setters do not replace the usual generated setters, they're final and just call the usual setters.

<table><tr valign='top'><td>
C struct and code :<br>
<pre><code>typedef struct S {<br>
    int a;<br>
    double d;<br>
} S;<br>
<br>
S s;<br>
s.a = 10;<br>
s.d = 10.0;<br>
</code></pre>
</td></tr><tr valign='top'><td>
Scala code :<br>
<pre><code>// Using autogenerated S structure code<br>
val s = (new S).a(10).d(10.0)<br>
</code></pre>
Scala code (using setters) :<br>
<pre><code>val s = new S<br>
s.a = 10<br>
s.d = 10.0<br>
</code></pre>
</td><td>
Java code :<br>
<pre><code>S s = new S().a(10).d(10.0)<br>
</code></pre>
</td></tr></table>